#!/bin/bash

set -euo pipefail
IFS=$'\n\t'

readonly text="$1"
readonly file=/Users/suhlig/Pictures/background-"$RANDOM".png

convert \
    -size 6720x3780 \
    xc:black \
    -pointsize 72 \
    -font helvetica \
    -fill white \
    -density 90 \
    -pointsize 100 \
    -gravity NorthWest -annotate +100+100 "$text" \
    -gravity North     -annotate +0+100   "$text" \
    -gravity NorthEast -annotate +100+100 "$text" \
    -gravity West      -annotate +100+0   "$text" \
    -gravity Center    -annotate +0+0     "$text" \
    -gravity East      -annotate +100+100 "$text" \
    -gravity SouthWest -annotate +100+100 "$text" \
    -gravity South     -annotate +0+0     "$text" \
    -gravity SouthEast -annotate +100+100 "$text" \
  "$file"

osascript -e "tell application \"Finder\" to set desktop picture to POSIX file \"$file\""

echo Background is now set to "$file".
